#!/usr/bin/env lims-perl

use strict;
use warnings;

BEGIN {
    # This allows the refimp command to self-serve as a tab completer for the bash shell.
    # When "refimp" is run by bash as a tab completer, the code below will service the
    # tab-completion request and then exit before doing any real work.
    # The code is in an eval to prevent problems on systems which do not have Getopt::Complete
    # installed.  The code is in a BEGIN block to ensure it still runs before anything else.
    if ($ENV{COMP_CWORD}) {
        eval "use Getopt::Complete::Cache (class => 'RefImp::Command', above => 1)";
        exit if ($@);
    }
    if ($ENV{COMP_LINE}) {
        #for transitioning from older version of completion
        #just return no result
        exit;
    }
};

use above "RefImp";
use RefImp::Command;
RefImp::Command->execute_with_shell_params_and_exit();
